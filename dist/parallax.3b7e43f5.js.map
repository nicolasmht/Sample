{"version":3,"sources":["utils/parallax.js"],"names":["offsetTop","element","acc","offsetParent","Parallax","ratio","parseFloat","dataset","parallax","onScroll","bind","onIntersection","elementY","offsetHeight","observer","IntersectionObserver","observe","entries","entry","isIntersecting","document","addEventListener","removeEventListener","window","requestAnimationFrame","screenY","scrollY","innerHeight","diffY","style","setProperty","Array","from","querySelectorAll","map"],"mappings":";;;;;;;;;;;;AAAA;AACA,SAASA,SAAT,CAAmBC,OAAnB,EAAqC;AAAA,MAATC,GAAS,uEAAH,CAAG;;AACjC,MAAGD,OAAO,CAACD,SAAX,EAAsB;AAClB,WAAOA,SAAS,CAACC,OAAO,CAACE,YAAT,EAAuBD,GAAG,GAAGD,OAAO,CAACD,SAArC,CAAhB;AACH;;AACD,SAAOE,GAAG,GAAGD,OAAO,CAACD,SAArB;AACH;;IAEKI;AACF,oBAAYH,OAAZ,EAAqB;AAAA;;AACjB,SAAKA,OAAL,GAAeA,OAAf;AAEA,SAAKI,KAAL,GAAaC,UAAU,CAACL,OAAO,CAACM,OAAR,CAAgBC,QAAjB,CAAvB;AACA,SAAKC,QAAL,GAAgB,KAAKA,QAAL,CAAcC,IAAd,CAAmB,IAAnB,CAAhB;AAEA,SAAKC,cAAL,GAAsB,KAAKA,cAAL,CAAoBD,IAApB,CAAyB,IAAzB,CAAtB;AACA,SAAKE,QAAL,GAAgBZ,SAAS,CAAC,KAAKC,OAAN,CAAT,GAA0B,KAAKA,OAAL,CAAaY,YAAb,GAA4B,CAAtE;AACA,QAAMC,QAAQ,GAAG,IAAIC,oBAAJ,CAAyB,KAAKJ,cAA9B,CAAjB;AACAG,IAAAA,QAAQ,CAACE,OAAT,CAAiBf,OAAjB;AACA,SAAKQ,QAAL,GAViB,CAYjB;AACH,IAED;;;;;WACA,wBAAeQ,OAAf,EAAwB;AAAA,iDACDA,OADC;AAAA;;AAAA;AACpB,4DAA4B;AAAA,cAAlBC,KAAkB;;AACxB,cAAGA,KAAK,CAACC,cAAT,EAAyB;AACrBC,YAAAA,QAAQ,CAACC,gBAAT,CAA0B,QAA1B,EAAoC,KAAKZ,QAAzC;AACA,iBAAKG,QAAL,GAAgBZ,SAAS,CAAC,KAAKC,OAAN,CAAT,GAA0B,KAAKA,OAAL,CAAaY,YAAb,GAA4B,CAAtE;AACH,WAHD,MAGO;AACHO,YAAAA,QAAQ,CAACE,mBAAT,CAA6B,QAA7B,EAAuC,KAAKb,QAA5C;AACH;AACJ;AARmB;AAAA;AAAA;AAAA;AAAA;AASvB;;;WAED,oBAAW;AAAA;;AACPc,MAAAA,MAAM,CAACC,qBAAP,CAA6B,YAAK;AAC9B,YAAMC,OAAO,GAAGF,MAAM,CAACG,OAAP,GAAiBH,MAAM,CAACI,WAAP,GAAqB,CAAtD;AACA,YAAMC,KAAK,GAAG,KAAI,CAAChB,QAAL,GAAgBa,OAA9B;;AACA,QAAA,KAAI,CAACxB,OAAL,CAAa4B,KAAb,CAAmBC,WAAnB,CAA+B,WAA/B,uBAA0DF,KAAK,GAAG,CAAC,CAAT,GAAa,KAAI,CAACvB,KAA5E;AACH,OAJD;AAKH;;;WAED,gBAAc;AACV,aAAO0B,KAAK,CAACC,IAAN,CAAWZ,QAAQ,CAACa,gBAAT,CAA0B,iBAA1B,CAAX,EAAyDC,GAAzD,CAA6D,UAACjC,OAAD,EAAY;AAC5E,eAAO,IAAIG,QAAJ,CAAaH,OAAb,CAAP;AACH,OAFM,CAAP;AAGH;;;;;;AAGLG,QAAQ,CAACM,IAAT","file":"parallax.3b7e43f5.js","sourceRoot":"../src","sourcesContent":["//Get the position of element from top of the page\nfunction offsetTop(element, acc = 0) {\n    if(element.offsetTop) {\n        return offsetTop(element.offsetParent, acc + element.offsetTop)\n    }\n    return acc + element.offsetTop\n}\n\nclass Parallax {\n    constructor(element) {\n        this.element = element\n\n        this.ratio = parseFloat(element.dataset.parallax)\n        this.onScroll = this.onScroll.bind(this)\n\n        this.onIntersection = this.onIntersection.bind(this)\n        this.elementY = offsetTop(this.element) + this.element.offsetHeight / 2\n        const observer = new IntersectionObserver(this.onIntersection)\n        observer.observe(element)\n        this.onScroll()\n\n        // document.addEventListener('scroll', this.onScroll)\n    }\n\n    //Entries its IntersectionObserverEntry []\n    onIntersection(entries) {\n        for(const entry of entries) {\n            if(entry.isIntersecting) {\n                document.addEventListener('scroll', this.onScroll)\n                this.elementY = offsetTop(this.element) + this.element.offsetHeight / 2\n            } else {\n                document.removeEventListener('scroll', this.onScroll)\n            }\n        }\n    }\n\n    onScroll() {\n        window.requestAnimationFrame(()=> {\n            const screenY = window.scrollY + window.innerHeight / 2\n            const diffY = this.elementY - screenY\n            this.element.style.setProperty(\"transform\", `translateY(${diffY * -1 * this.ratio}px)`)\n        })\n    }\n\n    static bind() {\n        return Array.from(document.querySelectorAll('[data-parallax]')).map((element)=> {\n            return new Parallax(element)\n        })\n    }\n}\n\nParallax.bind()"]}